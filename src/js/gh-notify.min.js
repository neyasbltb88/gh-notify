"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var GHNotifyItem=function(){function e(t){_classCallCheck(this,e),this.templateWrapClasses="flash flash-full ".concat(t.type),this.templateButtonClose='\n<button class="flash-close js-flash-close tooltipped tooltipped-w" type="button">\n    <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true">\n        <path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/>\n    </svg>\n</button>',this.templateButtonAllow='\n<button class="flash-close js-flash-close tooltipped tooltipped-w" type="button" data-ghnotify-confirm="true" aria-label="'.concat(t.labelAllow,'">\n    <svg class="octicon octicon-check" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true">\n        <path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path>\n    </svg>\n</button>'),this.message=t.message,this.id=t.id,this.container=t.container,this.confirm=t.confirm,this.wrap=null,this.timeout=null,this.timerID=null,this.timerStart=null,this.delRun=!1,this.init(t)}return _createClass(e,[{key:"init",value:function(t){var e=this;if(this.wrap=document.createElement("div"),this.wrap.className=this.templateWrapClasses,this.wrap.setAttribute("data-ghnotify-id",this.id),this.wrap.classList.add("h0"),t.confirm){this.wrap.innerHTML=this.templateButtonAllow,this.wrap.innerHTML+=this.templateButtonClose,this.wrap.querySelector('[data-ghnotify-confirm="true"]').addEventListener("click",this.del.bind(this));var i=this.wrap.querySelector(".flash-close:not([data-ghnotify-confirm])");i.setAttribute("aria-label",t.labelDeny),i.setAttribute("data-ghnotify-confirm",!1),i.addEventListener("click",this.del.bind(this))}else if(t.button){this.wrap.innerHTML=this.templateButtonClose;var n=this.wrap.querySelector(".flash-close");n.setAttribute("aria-label",t.label),n.addEventListener("click",this.del.bind(this))}var s=document.createElement("div");s.className="message",s.innerHTML=t.message,this.wrap.appendChild(s),this.container.appendChild(this.wrap),setTimeout(function(){e.wrap.classList.remove("h0")},10),t.timeout&&(this.timeout=t.timeout,this.startTimer())}},{key:"del",value:function(t){var e=this;if(!this.delRun){this.delRun=!0,this.timerID&&clearTimeout(this.timerID),this.wrap.classList.add("h0");var i={id:this.id};if(t instanceof Event){var n=t.currentTarget.getAttribute("data-ghnotify-confirm");null!=n&&(i.confirm=n)}var s=new CustomEvent("close",{detail:i});this.wrap.addEventListener("transitionend",function(t){e.container.removeChild(e.wrap),e.container.dispatchEvent(s)})}}},{key:"startTimer",value:function(){var t=this;null!==this.timeout&&(this.timerStart=Date.now(),this.timerID=setTimeout(function(){t.del()},this.timeout))}},{key:"pauseTimer",value:function(){if(this.timerID){clearTimeout(this.timerID),this.timerID=null;var t=Date.now();this.restTimeout=this.timeout-(t-this.timerStart),this.timeout=0<this.restTimeout?this.restTimeout:this.del()}}}]),e}(),GHNotify=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.offsetY=t.offsetY||"0px",this.offsetX=t.offsetX||"0px",this.width=t.width||"100%",this.place=t.place||"nw",this.container_selector=t.container||".notify_container",this.position=t.position||"fixed",this.parent=t.parent||"body",this.default_message=t.default||"TEST",this.new=t.new,this.container=null,this.style_elem=null,this.parent_elem=null,this.lastID=0,this.buffer={},this.init()}return _createClass(e,[{key:"destroy",value:function(){for(var t in this.parent_elem.removeChild(this.container),document.body.removeChild(this.style_elem),this)delete this[t];this.destroy=void 0,this.parseParamsItem=void 0,this.normalizeParamsItem=void 0,this.push=void 0,this.remove=void 0,this.removeAll=void 0,this.removeFromBuffer=void 0,this.pauseTimers=void 0,this.startTimers=void 0,this.detectContainerPlace=void 0,this.createContainer=void 0,this.checkContainer=void 0,this.init=void 0}},{key:"parseParamsItem",value:function(){var t={};if("string"!=typeof arguments[0]&&"number"!=typeof arguments[0]||"number"!=typeof arguments[1])if("string"==typeof arguments[0]&&void 0===arguments[1])t.message=arguments[0];else if("number"==typeof arguments[0]&&void 0===arguments[1])t.timeout=arguments[0];else{if("object"===_typeof(arguments[0]))return this.normalizeParamsItem(arguments[0]);void 0===arguments[0]||(t.message="Не правильные аргументы .push()")}else t.message=arguments[0],t.timeout=arguments[1];return this.normalizeParamsItem(t)}},{key:"normalizeParamsItem",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.id=++this.lastID,t.container=this.container,t.message=void 0!==t.message?t.message:this.default_message+": ".concat(this.lastID),t.button=!1!==t.button,t.timeout=void 0!==t.timeout&&t.timeout,t.label=void 0!==t.label?t.label:"Закрыть это уведомление",t.confirm=!0===t.confirm,t.labelDeny=void 0!==t.labelDeny?t.labelDeny:"Отклонить",t.labelAllow=void 0!==t.labelAllow?t.labelAllow:"Принять",t.type=void 0!==t.type?"flash-"+t.type:"",t}},{key:"push",value:function(){var t=this.parseParamsItem.apply(this,arguments);return this.buffer[this.lastID]=new GHNotifyItem(t),this.lastID}},{key:"remove",value:function(t){this.buffer[t].del()}},{key:"removeAll",value:function(){for(var t in this.buffer)this.buffer[t].del()}},{key:"removeFromBuffer",value:function(t){delete this.buffer[t.detail.id]}},{key:"pauseTimers",value:function(t){for(var e in this.buffer)this.buffer[e].pauseTimer()}},{key:"startTimers",value:function(t){for(var e in this.buffer)this.buffer[e].startTimer()}},{key:"detectContainerPlace",value:function(t){var e,i=this.position,n=this.offsetX,s=this.offsetY,a=this.width;function o(){var t;return t="100%"===a?"width: calc(".concat(a," - ").concat(n,");"):"width: ".concat(a,";"),t+="left: ".concat(n,";")}function r(){return"100%"===a?"width: calc( ".concat(a," - ").concat(n," );\n                left: ").concat(n,";"):"width: ".concat(a,";\n                left: calc(").concat(n," + 50%);\n                transform: translateX(-50%);")}function l(){return"100%"===a?"width: calc( ".concat(a," - ").concat(n," );"):"width: ".concat(a,";\n                left: calc(100% - (").concat(a," + ").concat(n,"));")}function c(t){return t+="top: ".concat(s,";")}function h(t){return t+="relative"==i?"top: ".concat(s,";"):"bottom: ".concat(s,";")}switch(t){case"nw":e=c(o());break;case"n":e=c(r());break;case"ne":e=c(l());break;case"se":e=h(l());break;case"s":e=h(r());break;case"sw":e=h(o());break;default:e=c(o()),console.log("place_name: ",t)}return e}},{key:"createContainer",value:function(t){t=t.slice(1),this.container=document.createElement("div"),this.container.className=t,this.parent_elem=document.querySelector(this.parent),this.parent_elem.appendChild(this.container),this.style_elem=document.createElement("style"),this.style_elem.className="".concat(t,"_style");var e=this.detectContainerPlace(this.place),i="\n        .".concat(t," {\n            position: ").concat(this.position,";\n            z-index: 99;\n            border: 1px solid rgba(27, 31, 35, .15);\n            border-width: 0 1px;\n            box-sizing: border-box;\n            ").concat(e,";\n        }");this.style_elem.textContent=i,document.body.appendChild(this.style_elem)}},{key:"checkContainer",value:function(t){var e=document.querySelector(t);e&&"[object HTMLDivElement]"===e.toString()?this.container=e:this.createContainer(t)}},{key:"init",value:function(){this.new?this.createContainer(this.container_selector):this.checkContainer(this.container_selector),this.container.addEventListener("close",this.removeFromBuffer.bind(this)),this.container.addEventListener("mouseenter",this.pauseTimers.bind(this)),this.container.addEventListener("mouseleave",this.startTimers.bind(this))}}]),e}();window.GHNotify=GHNotify;
//# sourceMappingURL=maps/gh-notify.min.js.map
